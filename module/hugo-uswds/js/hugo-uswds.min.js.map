{"version":3,"file":"hugo-uswds.min.js","mappings":"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","sources":["webpack://HugoUSWDS/webpack/universalModuleDefinition","webpack://HugoUSWDS/./src/constants.ts","webpack://HugoUSWDS/./src/in-page-nav.ts","webpack://HugoUSWDS/external umd \"jQuery\"","webpack://HugoUSWDS/webpack/bootstrap","webpack://HugoUSWDS/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"HugoUSWDS\", [\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HugoUSWDS\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"HugoUSWDS\"] = factory(root[\"jQuery\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__145__) => {\nreturn ","export namespace Constants {\n  export const SELECTOR_MAIN_ELEMENT = \"main\";\n}\n  ","const jQuery = require('jquery')\n\nconst $: JQueryStatic = jQuery;\n\nexport namespace InPageNav {\n  const CLASS = \"site-in-page-nav\";\n  const LINK_CLASS = \"site-in-page-nav__link\";\n  const SCROLL_OFFSET: number = -120;\n  const CURRENT_CLASS = `usa-current`;\n  const IN_PAGE_NAV_HEADING_SELECTORS = \"h2, h3, h4\";\n\n  export function init(main: JQuery<HTMLElement>) {\n    let sectionId = scrollToCurrentSection();\n    $(`.${CLASS}`).each((_, nav) => {\n      let currentNav = new Nav(nav, main);\n      if (sectionId) {\n        currentNav.scrollNavToSectionId(sectionId);\n      }\n    });\n  }\n\n  /**\n   * Scrolls the page to the section corresponding to the current hash fragment, if one exists.\n   */\n  function scrollToCurrentSection() : (string | undefined) {\n    let sectionId = getSectionIdFromFragment(window.location.hash);\n    if (sectionId) {\n      let heading = document.getElementById(sectionId);\n      if (heading) {\n        scrollToSection(heading);\n        return sectionId;\n      }\n    }\n    return undefined;\n  }\n\n  function getContentScrollOffset() : number {\n//    return (this.nav.dataset.scrollOffset || SCROLL_OFFSET) as number;\n    return SCROLL_OFFSET;\n  }\n\n  /**\n   * Scroll smoothly to a section based on the passed in element\n   *\n   * @param el - Id value with the number sign removed\n   */\n  function scrollToSection(el: HTMLElement) {\n    let scrollOffset = getContentScrollOffset();\n\n    window.scroll({\n      behavior: \"smooth\",\n      top: el.offsetTop - scrollOffset,\n    });\n    \n    if (window.location.hash.slice(1) !== el.id) {\n      window.history.pushState(null, \"\", `#${el.id}`);\n    }\n  }\n\n  function getSectionIdFromAnchor(element: HTMLAnchorElement) : string {\n    return getSectionIdFromFragment(element.hash);\n  }\n\n  function getSectionIdFromFragment(text: string) : string {\n    return text.slice(1);\n  }\n\n  export class Nav {\n    private readonly nav: HTMLElement;\n    private readonly content: JQuery<HTMLElement>;\n    private intersections: Map<string, number>;\n\n    constructor(nav: HTMLElement, content: JQuery<HTMLElement>) {\n      this.nav = nav;\n      this.content = content;\n      \n      this.initLinks();\n      this.intersections = this.initObserver();\n    }\n\n    initLinks() {\n      $(this.nav).find(`.${LINK_CLASS}`)\n        .on(\"click\",(ev) => { this.handleClick(ev)})\n        .on(\"keypress\",(ev) => { this.handleKeypress(ev)});\n    }\n\n    protected handleClick(event: JQuery.ClickEvent) {\n      event.preventDefault();\n      this.handleClickFromLink(event.currentTarget);\n    }\n  \n    protected handleKeypress(event: JQuery.KeyPressEvent) {\n      let code = event.keyCode || event.which;\n      if (code == 13) { /* enter */\n        event.preventDefault();\n        this.handleEnterFromLink(event.currentTarget);\n      }\n    }\n\n    private getSectionHeadings() : JQuery<HTMLElement> {\n      let headingSelectors = this.nav.dataset.headingSelectors || IN_PAGE_NAV_HEADING_SELECTORS;\n      return this.content.find(`${headingSelectors}`);\n    }\n\n    private initObserver() : Map<string, number> {\n      const options : IntersectionObserverInit = {\n        root: document,\n        threshold: 1,\n        rootMargin: \"48px 0px 0px 0px\"\n      };\n        \n      let observer = new window.IntersectionObserver((entries) => {\n        this.handleIntersection(entries);\n        }, options);\n        \n      let sectionHeadings = this.getSectionHeadings();\n//      console.trace(sectionHeadings.get());\n\n      let result = new Map<string, number>();\n      sectionHeadings.each((_, element) => {\n        observer.observe(element);\n\n        let key = element.id;\n        result.set(key, 0);\n      });\n      return result;\n    }\n\n    getNavAnchorBySectionId(id: string) : (HTMLAnchorElement | undefined) {\n      let fragment = encodeURI(`#${id}`);\n      return $(this.nav).find(`a[href='${fragment}'`)[0] as HTMLAnchorElement;\n    }\n\n    protected handleIntersection(entries: IntersectionObserverEntry[]) {\n      let nav = $(this.nav);\n      let allLinks = nav.find(`.${LINK_CLASS}`);\n      let spied = entries.map((entry) => {\n        if (entry.isIntersecting === true && entry.intersectionRatio >= 1) {\n          let id = entry.target.id;\n//          console.warn(`Intersection of ${id}: ${entry.intersectionRatio}`);\n//          allLinks.removeClass(CURRENT_CLASS);\n          let spy = this.getNavAnchorBySectionId(id);\n//          spy.classList.add(CURRENT_CLASS);\n          return spy;\n        }\n        return undefined;\n      }).find((spy) => spy !== undefined);\n/*\n      let spied = entries.map((entry) => {\n        let id = entry.target.id;\n        console.warn(`Intersection of ${id}: ${entry.intersectionRatio}`);\n        let spy = this.getNavAnchorBySectionId(id);\n        if (entry.isIntersecting === true && entry.intersectionRatio == 1) {\n          spy.addClass(CURRENT_CLASS);\n          return spy[0];\n        }\n        spy.removeClass(CURRENT_CLASS);\n        return undefined;\n      }).find((spy) => spy !== undefined);\n*/\n      if (spied) {\n        this.makeActive(getSectionIdFromAnchor(spied));\n//        this.scrollNavToActive();\n      }\n/*\n      if (spied !== undefined) {\n        this.scrollNavToAnchor(spied);\n      }\n*/\n    }\n\n    scrollNavToSectionId(sectionId: string) : void {\n      let el = this.getNavAnchorBySectionId(sectionId);\n      if (el) {\n        this.scrollNavToAnchor(el);\n      }\n    }\n\n    scrollNavToActive() : void {\n      let nav = $(this.nav);\n      let anchor = nav.find(`a.${CURRENT_CLASS}`);\n      if (anchor.length > 0) {\n        this.scrollNavToAnchor(anchor[0] as HTMLAnchorElement);\n      }\n    }\n\n    makeActive(sectionId: string) {\n      let nav = $(this.nav);\n      nav.find(`.${LINK_CLASS}`).removeClass(CURRENT_CLASS);\n      let anchor = this.getNavAnchorBySectionId(sectionId);\n\n      if (anchor === undefined) {\n        return;\n      }\n\n      anchor.classList.add(CURRENT_CLASS);\n      this.scrollNavToAnchor(anchor);\n    }\n\n    /**\n     * Scroll the in-page-nav to the active element\n     * @param el the active navigation anchor\n     */\n    scrollNavToAnchor(el: HTMLAnchorElement) : void {\n      let nav = $(this.nav);\n\n      let navPosition = this.findPosition(this.nav);\n      let elPosition = this.findPosition(el);\n      let navInnerHeight = nav.innerHeight();\n\n      if (navPosition === undefined || elPosition === undefined || navInnerHeight === undefined) {\n        return;\n      }\n\n      let elOffset = elPosition - navPosition;\n//      console.info(`${el} offset: ${elOffset} nav: ${navPosition} anchor: ${elPosition}`);\n\n      let halfHeight =  navInnerHeight / 2;\n\n      let position;\n      if (elOffset < halfHeight) {\n        position = 0;\n//        console.info(`above: y: ${elOffset}, half: ${halfHeight}, position: ${position}`);\n      } else {\n        position = elOffset - halfHeight;\n//        console.info(`below: y: ${elOffset}, half: ${halfHeight}, position: ${position}`);\n      }\n\n      this.nav.scroll({\n        behavior: \"smooth\",\n        top: position,\n      });\n    }\n\n    private findPosition(el: HTMLElement) {\n      let result = 0;\n      if (el.offsetParent) {\n        let obj : (undefined | HTMLElement) = el;\n        do {\n//          console.info(`${obj}: ${obj.offsetTop}`)\n          result += obj.offsetTop;\n          obj = obj.offsetParent as HTMLElement;\n        } while (obj);\n        return result;\n      }\n    }\n\n    /**\n     * Handle click from link\n     *\n     * @param {JQuery<HTMLElement>} el An element within the in-page nav component\n     */\n    protected handleClickFromLink(anchor: HTMLAnchorElement) {\n      let id = getSectionIdFromAnchor(anchor);\n      let target = document.getElementById(id) as HTMLElement;\n      scrollToSection(target);\n//      this.makeActive(id);\n    }\n\n    /**\n     * Handle the enter event from a link within the in-page nav component\n     *\n     * @param {KeyboardEvent} event An event within the in-page nav component\n     */\n    protected handleEnterFromLink(anchor: HTMLAnchorElement) {\n      let id = getSectionIdFromAnchor(anchor);\n      let target = document.getElementById(id) as HTMLElement;\n      \n      if (target.parentElement) {\n        let parent : HTMLElement = target.parentElement;\n        parent.tabIndex = 0;\n        parent.focus();\n        $(parent).one(\"blur\", () => parent.tabIndex = -1);\n      }\n      scrollToSection(target);\n//      this.makeActive(id);\n    }\n  }\n}\n\n\n\n\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__145__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*\nconst inPageNavigation = behavior(\n  {\n    [CLICK]: {\n      [`.${IN_PAGE_NAV_LINK_CLASS}`](event) {\n        event.preventDefault();\n        if (this.disabled) return;\n        handleClickFromLink(this);\n      },\n    },\n    keydown: {\n      [`.${IN_PAGE_NAV_LINK_CLASS}`]: keymap({\n        Enter: handleEnterFromLink,\n      }),\n    },\n  },\n  {\n    init(root) {\n      selectOrMatches(`.${IN_PAGE_NAV_CLASS}`, root).forEach((inPageNavEl) => {\n        createInPageNav(inPageNavEl);\n        scrollToCurrentSection();\n      });\n    },\n  }\n);\n*/\n\nconst jQuery = require('jquery')\nimport { Constants } from \"./constants\";\nimport { InPageNav } from \"./in-page-nav\";\n\ndeclare var window : any;\nwindow.$ = window.jQuery = jQuery;\n\njQuery(() => {\n  const main = jQuery(`${Constants.SELECTOR_MAIN_ELEMENT}`);\n  InPageNav.init(main);\n});\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__145__","Constants","SELECTOR_MAIN_ELEMENT","InPageNav","$","LINK_CLASS","SCROLL_OFFSET","CURRENT_CLASS","scrollToSection","el","scrollOffset","window","scroll","behavior","top","offsetTop","location","hash","slice","id","history","pushState","getSectionIdFromAnchor","element","getSectionIdFromFragment","text","init","main","sectionId","heading","document","getElementById","scrollToCurrentSection","each","_","nav","currentNav","Nav","scrollNavToSectionId","content","this","initLinks","intersections","initObserver","find","on","ev","handleClick","handleKeypress","event","preventDefault","handleClickFromLink","currentTarget","keyCode","which","handleEnterFromLink","getSectionHeadings","headingSelectors","dataset","options","threshold","rootMargin","observer","IntersectionObserver","entries","handleIntersection","sectionHeadings","result","Map","observe","key","set","getNavAnchorBySectionId","fragment","encodeURI","spied","map","entry","isIntersecting","intersectionRatio","target","spy","undefined","makeActive","scrollNavToAnchor","scrollNavToActive","anchor","length","removeClass","classList","add","navPosition","findPosition","elPosition","navInnerHeight","innerHeight","position","elOffset","halfHeight","offsetParent","obj","parentElement","tabIndex","focus","one","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","jQuery"],"sourceRoot":""}